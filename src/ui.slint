import { Button } from "std-widgets.slint";
export component Calculator inherits Window {
    in property <string> default:"0";
    callback handle_button_clicked(string);
    
    in-out property <bool> is-dark-mode: false;
    callback request_toggle_theme;
    
    // Ãp dá»¥ng mÃ u ná»n dá»±a trÃªn is-dark-mode
    background: root.is-dark-mode ? #36454F : #b7fbbb;
    
    width: 250px;
    height: 350px; 
 
    

    VerticalLayout {
        spacing: 5px;
        padding: 10px;

        // --- KHU Vá»°C HIá»‚N THá»Š ---
        Rectangle {
            height: 70px; 
            background: root.is-dark-mode ? #1E2B38 : #01350f; // MÃ u ná»n hiá»ƒn thá»‹

            TextInput {
                text: root.default; 
                read-only: true;
                font-size: 36px;
                color: root.is-dark-mode ? #FFFFFF : #ffffff; // MÃ u chá»¯ dá»±a trÃªn is-dark-mode
                horizontal-alignment: right;
                width: 100%; 
                height: 100%;
            }
        }


        
        
        // HÃ ng Memory vÃ  Theme Toggle
        HorizontalLayout {
            spacing: 5px;
            //MC
            Button {text: "MC";clicked => { root.handle_button_clicked("M_CLEAR"); } }
            //MR
            Button {text: "MR"; clicked => { root.handle_button_clicked("M_RECALL"); }}
            //M+
            Button {text: "M+"; clicked => { root.handle_button_clicked("M_ADD"); }}
            //M-
            Button {text: "M-"; clicked => { root.handle_button_clicked("M_SUBTRACT"); }}
        }

        // HÃ ng 1:
        HorizontalLayout {
            spacing: 5px;
            Button { text:"C"; Â clicked => {root.handle_button_clicked("C")}; }
            Button { text:"Â±"; Â clicked => {root.handle_button_clicked("Â±")}; }
            // NÃºt chuyá»ƒn Ä‘á»•i Theme má»›i
            Button { 
                text: root.is-dark-mode ? "ðŸŒ™" : "â˜€ï¸";
                clicked => { root.request_toggle_theme(); }
            }
            Button { text: "/"; Â clicked => { root.handle_button_clicked("/"); } }
        }

        // HÃ ng 2: 
        HorizontalLayout {
            spacing: 5px;
            Button { text:"7"; clicked => {root.handle_button_clicked("7")}; }
            Button { text:"8"; clicked => {root.handle_button_clicked("8")}; }
            Button { text: "9"; clicked => {root.handle_button_clicked("9"); } }
            Button { text: "x"; Â clicked => { root.handle_button_clicked("x"); } }
        }

        // HÃ ng 3:
        HorizontalLayout {
            spacing: 5px;
            Button { text:"4"; clicked => {root.handle_button_clicked("4")}; }
            Button { text:"5"; clicked => {root.handle_button_clicked("5")}; }
            Button { text: "6"; clicked => {root.handle_button_clicked("6"); } }
            Button { text: "-"; Â clicked => { root.handle_button_clicked("-"); } }
        }

        // HÃ ng 4:
        HorizontalLayout {
            spacing: 5px;
            Button { text:"1"; clicked => {root.handle_button_clicked("1")}; }
            Button { text:"2"; clicked => {root.handle_button_clicked("2")}; }
            Button { text: "3"; clicked => {root.handle_button_clicked("3"); } }
            Button { text: "+"; clicked => { root.handle_button_clicked("+"); } }
        }
        
        // HÃ ng cuá»‘i
        HorizontalLayout {
            spacing: 5px;
            // Gá»™p 0 vÃ  00 thÃ nh má»™t nÃºt 0 lá»›n hÆ¡n
            Button { 
                text:"0"; 
                clicked => {root.handle_button_clicked("0")}; 
                // TÄƒng Ä‘á»™ rá»™ng chiáº¿m dá»¥ng
                preferred-width: 2 * (parent.width / 4) + parent.spacing / 2;
            }
            Button { text:"."; clicked => {root.handle_button_clicked(".")}; }
            Button { text: "="; Â clicked => {root.handle_button_clicked("="); }}
        }
    }
}